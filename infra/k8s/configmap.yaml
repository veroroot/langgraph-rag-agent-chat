apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: langchain-langgraph-agent
data:
  APP_NAME: "LangChain LangGraph Agent"
  APP_VERSION: "0.1.0"
  DEBUG: "false"
  VECTOR_STORE_TYPE: "pgvector"
  VECTOR_DIMENSION: "1536"
  VECTOR_COLLECTION_NAME: "document_embeddings"
  EMBEDDING_MODEL: "text-embedding-3-small"
  EMBEDDING_PROVIDER: "openai"
  LLM_MODEL: "gpt-4o-mini"
  LLM_TEMPERATURE: "0.0"
  LLM_PROVIDER: "openai"
  STORAGE_TYPE: "local"
  UPLOAD_DIR: "/app/data/uploads"
  MAX_UPLOAD_SIZE: "1048576000"
  ALLOWED_EXTENSIONS: "[\".pdf\", \".docx\", \".txt\", \".md\"]"
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_PER_MINUTE: "30"
  LOG_LEVEL: "INFO"
  JSON_LOGGING: "true"
  AGENT_TYPE: "langgraph"
  POSTGRES_POOL_SIZE: "5"
  PROJECT_NAME: "LangChain LangGraph Agent"
  CHECKPOINT_TABLES: "[\"checkpoints\", \"checkpoint_blobs\"]"
  # CORS_ORIGINS: Ingress 사용 시 Ingress 도메인으로 설정
  # 로컬 테스트 (Port Forwarding): ["http://localhost:3000", "http://localhost:8000"]
  # Ingress 사용: ["http://langchain-agent.local", "https://yourdomain.com"]
  CORS_ORIGINS: "[\"http://langchain-agent.local\"]"
  # Gunicorn settings
  GUNICORN_WORKERS: "4"
  PORT: "8000"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: frontend-config
  namespace: langchain-langgraph-agent
data:
  # VITE_API_BASE_URL: 런타임에 주입됨 (docker-entrypoint.sh에서 envsubst 사용)
  # 옵션 1 (권장): 상대 경로 사용 - 빈 문자열
  #   프론트엔드 코드가 이미 /api/v1/... 경로를 사용하므로, 빈 문자열이면 상대 경로로 작동
  #   Ingress를 통해 접근 시: /api/v1/... (현재 도메인 기준)
  # 옵션 2: Ingress 절대 경로 사용
  #   "http://langchain-agent.local/api" 또는 "https://yourdomain.com/api"
  #   Port Forwarding 사용 시: "http://localhost:8000"
  VITE_API_BASE_URL: ""

